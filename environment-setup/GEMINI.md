# Project Overview

This project, `smartrentals-env-devops`, is a comprehensive setup for a Google Cloud Platform (GCP) environment. It uses Terraform to provision and manage the infrastructure, following Google's best practices for a foundational enterprise setup. The project also includes a Next.js web application, `smart-rentals-web`, which is designed to be deployed on the provisioned infrastructure.

## Infrastructure (Terraform)

The core of this project is the Terraform configuration, which sets up a complete GCP environment. It was initially generated by "GCP Cloud Setup".

**Key Characteristics:**

*   **Technology:** Terraform `(>= 1.3)` with the Google Provider `(>= 6.34)`.
*   **State Management:** Terraform state is stored remotely in a Google Cloud Storage (GCS) bucket, as defined in `backends.tf`.
*   **Modular Design:** The infrastructure is organized into logical modules, such as `projects`, `network`, `iam`, and `apigee`.
*   **Project Factory:** It uses the `terraform-google-modules/project-factory/google` module to create and manage GCP projects.
*   **VPC Networking:** It sets up Shared VPCs for production and non-production environments.
*   **IAM:** Identity and Access Management is handled through Google Groups, with roles assigned at the folder and project level.
*   **Apigee:** It includes a complete setup for Apigee, Google's API management platform, indicating a focus on API-driven services.
*   **Logging and Monitoring:** A centralized project is created for logging and monitoring.

**Building and Running the Infrastructure:**

1.  **Prerequisites:**
    *   Google Cloud SDK (`gcloud`) installed and authenticated.
    *   Terraform `(>= 1.3)` installed.
    *   A GCP project with billing enabled.
    *   A GCS bucket for Terraform state.

2.  **Deployment:**
    *   Update the `cloud-setup.auto.tfvars` file with your organization ID and billing account.
    *   Initialize Terraform:
        ```bash
        terraform init
        ```
    *   Apply the Terraform configuration:
        ```bash
        terraform apply
        ```

## Web Application (Next.js)

The `smart-rentals-web` directory contains a modern web application built with Next.js.

**Key Characteristics:**

*   **Framework:** Next.js `(16.0.7)` with React `(19.2.0)`.
*   **Language:** TypeScript.
*   **Styling:** Tailwind CSS.
*   **Linting:** ESLint.
*   **Deployment:** The application is designed to be containerized and deployed as a serverless application on Google Cloud Run. The `next.config.ts` is configured for a standalone output.

**Building and Running the Web Application:**

1.  **Prerequisites:**
    *   Node.js and npm (or yarn) installed.

2.  **Development:**
    *   Install dependencies:
        ```bash
        cd smart-rentals-web
        npm install
        ```
    *   Run the development server:
        ```bash
        npm run dev
        ```

3.  **Production Build:**
    *   Build the application:
        ```bash
        npm run build
        ```
    *   Start the production server:
        ```bash
        npm run start
        ```

## CI/CD (Cloud Build)

The project uses Google Cloud Build for continuous integration and deployment of the `smart-rentals-web` application. The `cloudbuild.yaml` file defines the following steps:

1.  **Build Docker Image:** Builds a Docker image of the Next.js application.
2.  **Push to GCR:** Pushes the image to Google Container Registry.
3.  **Deploy to Cloud Run:** Deploys the image to Google Cloud Run.

## Development Conventions

*   **Infrastructure as Code:** All infrastructure is managed declaratively using Terraform.
*   **GitOps:** The `README.md` suggests using a Git repository to manage the codebase, implying a GitOps workflow.
*   **Group-Based Permissions:** IAM policies are managed by assigning roles to Google Groups rather than individual users.
*   **Containerization:** The web application is containerized with Docker for consistent deployments.
*   **Serverless:** The web application is deployed to Cloud Run, a serverless platform.
